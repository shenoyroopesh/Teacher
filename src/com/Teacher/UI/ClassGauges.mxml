<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%" 
		 xmlns:Layouts="com.Teacher.Layouts.*">
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			import spark.events.IndexChangeEvent;
			import com.greensock.easing.Quart;
			import com.greensock.TweenLite;
			
			public function scrollGroup ( n : int ) : void
			{
				var scrollPoint : Point = timeMachine.layout.getScrollPositionDeltaToElement( n );
				var duration : Number = ( Math.max( scrollPoint.y, timeMachine.layout.target.verticalScrollPosition ) - Math.min( scrollPoint.y, timeMachine.layout.target.verticalScrollPosition )) * .005;
				TweenLite.to( timeMachine.layout, duration, { verticalScrollPosition: scrollPoint.y, ease: Quart.easeOut });
			}
			
			protected function timeMachine_caretChangeHandler ( event : IndexChangeEvent ) : void
			{
				scrollGroup( event.newIndex );
				event.target.invalidateDisplayList();
			}
			
			protected function timeMachine_creationCompleteHandler () : void
			{
				var perspectivePoint : Point = new Point( timeMachine.width * .5, timeMachine.height * .5 );
				root.transform.perspectiveProjection.projectionCenter = localToGlobal( perspectivePoint );
			}
		]]>
	</fx:Script>
	
	<fx:Declarations>
		<s:ArrayCollection id="collection">
			<fx:String>John D'Souza</fx:String>
			<fx:String>Ramsey Kraig</fx:String>
			<fx:String>Liliput</fx:String>
			<fx:String>Jack Korba</fx:String>
			<fx:String>Mythili Singh</fx:String>
			<fx:String>Levi Smoth</fx:String>
			<fx:String>Ivory Rai</fx:String>
			<fx:String>Rani Kumar</fx:String>
		</s:ArrayCollection>
	</fx:Declarations>
	<s:BorderContainer width="100%" height="100%" borderVisible="false"
					   backgroundColor="0xA8C6EE" backgroundAlpha="1">
		<s:List id="timeMachine"
				itemRenderer="com.Teacher.Renderers.GaugesRenderer"
				width="100%"
				height="100%"
				dataProvider="{collection}"
				selectedIndex="0"
				caretChange="timeMachine_caretChangeHandler(event)"
				creationComplete="callLater(timeMachine_creationCompleteHandler)"
				scroller="{null}" contentBackgroundAlpha="0">		
			<s:layout>
				<Layouts:TimeMachineLayout id="timeMachineLayout"
										   distance="100"
										   index="{ timeMachine.selectedIndex }"
										   horizontalDisplacement="0"
										   verticalDisplacement="-50"/>
			</s:layout>
		</s:List>
		<s:VGroup left="10"
				  verticalCenter="0">
			<s:List id="panels"
					selectedIndex="{timeMachine.selectedIndex}"
					dataProvider="{collection}"
					change="timeMachine.selectedIndex = event.newIndex" />
			
			<s:Label text="Index" />
			<s:HSlider id="indexSlider"
					   minimum="0"
					   maximum="{collection.length - 1}"
					   stepSize="1"
					   liveDragging="true"
					   value="@{ timeMachine.selectedIndex }" />
			<s:HGroup>
				<s:Button label="Prev"
						  enabled="{timeMachine.selectedIndex > 0}"
						  click="timeMachine.selectedIndex -= 1" />
				<s:Button label="Next"
						  enabled="{timeMachine.selectedIndex &lt; collection.length - 1}"
						  click="timeMachine.selectedIndex += 1" />
			</s:HGroup>
		</s:VGroup>
	</s:BorderContainer>
</s:Group>
